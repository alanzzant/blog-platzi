(this["webpackJsonpblog-platzi"]=this["webpackJsonpblog-platzi"]||[]).push([[0],{44:function(e,t,a){e.exports=a.p+"static/media/user.6b21b7b9.jpg"},45:function(e,t,a){e.exports=a.p+"static/media/logo.d27dc22a.png"},46:function(e,t,a){e.exports=a.p+"static/media/portal.2601412a.png"},47:function(e,t,a){e.exports=a(85)},57:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getUsers",(function(){return _}));var r={};a.r(r),a.d(r,"getPosts",(function(){return L})),a.d(r,"getUserPosts",(function(){return K})),a.d(r,"togglePost",(function(){return U})),a.d(r,"getComments",(function(){return I}));var s={};a.r(s),a.d(s,"getTasks",(function(){return X})),a.d(s,"changeNewTask",(function(){return Z})),a.d(s,"addTask",(function(){return $})),a.d(s,"editTask",(function(){return ee})),a.d(s,"changeCompleted",(function(){return te})),a.d(s,"deleteTask",(function(){return ae}));var c=a(0),o=a.n(c),l=a(24),u=a.n(l),p=a(20),i=a(8),d=a(42),m=a(5),h=a(19),E=a(2),f=a.n(E),b=a(14),y=a(15),O=a(17),k=a(16),v=a(18),g=(a(57),function(e){return o.a.createElement("div",{className:"Table"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Name"),o.a.createElement("th",null,"Email"),o.a.createElement("th",null,"Website"),o.a.createElement("th",null,"View"))),o.a.createElement("tbody",null,e.users.map((function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",null,e.name),o.a.createElement("td",null,e.email),o.a.createElement("td",null,e.website),o.a.createElement("td",null,o.a.createElement(m.b,{to:"/user/".concat(t)},o.a.createElement("i",{className:"profile icon"}))))})))))}),S=(a(59),function(){return o.a.createElement("div",{className:"lds-ripple"},o.a.createElement("div",null),o.a.createElement("div",null))}),j=(a(60),function(e){return o.a.createElement("div",{className:"Fatal"},o.a.createElement("h1",null,"Oops! Something went wrong"),o.a.createElement("p",null,e.error))}),T=a(11),R=a.n(T),N="ERROR_USERS",_=function(){return function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e({type:"LOADING_USERS"}),a.next=4,f.a.awrap(R.a.get("https://jsonplaceholder.typicode.com/users"));case 4:t=a.sent,e({type:"GET_USERS",payload:t.data}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),e({type:N,payload:a.t0.message});case 11:case"end":return a.stop()}}),null,null,[[0,8]])}},x=function(e){function t(){return Object(b.a)(this,t),Object(O.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.users.length){e.next=3;break}return e.next=3,f.a.awrap(this.props.getUsers());case 3:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){return this.props.isLoading?o.a.createElement(S,null):this.props.error?o.a.createElement(j,{error:this.props.error}):o.a.createElement(g,{users:this.props.users})}}]),t}(c.Component),A=Object(i.b)((function(e){return e.usersReducer}),n)(x),w=a(1),C=a(21),L=function(){return function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e({type:"LOADING_POSTS"}),a.next=4,f.a.awrap(R.a.get("https://jsonplaceholder.typicode.com/posts"));case 4:t=a.sent,e({type:"GET_POSTS",payload:t.data}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),e({type:"ERROR_POSTS",payload:a.t0.message});case 11:case"end":return a.stop()}}),null,null,[[0,8]])}},K=function(e){return function(t,a){var n,r,s,c,o,l,u,p;return f.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,n=a().usersReducer.users,r=a().postsReducer.posts,s=n[e].id,t({type:"LOADING_POSTS"}),i.next=7,f.a.awrap(R.a.get("https://jsonplaceholder.typicode.com/posts?userId=".concat(s)));case 7:c=i.sent,o=c.data.map((function(e){return Object(w.a)({},e,{comments:[],isOpen:!1})})),l=[].concat(Object(C.a)(r),[o]),t({type:"UPDATE_POSTS",payload:l}),u=l.length-1,(p=Object(C.a)(n))[e]=Object(w.a)({},n[e],{postsKey:u}),t({type:"GET_USERS",payload:p}),i.next=20;break;case 17:i.prev=17,i.t0=i.catch(0),t({type:"ERROR_POSTS",payload:i.t0.message});case 20:case"end":return i.stop()}}),null,null,[[0,17]])}},U=function(e,t){return function(a,n){var r,s,c,o;return f.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:r=n().postsReducer.posts,s=r[e][t],c=Object(w.a)({},s,{isOpen:!0}),(o=Object(C.a)(r))[e]=Object(C.a)(r[e]),o[e].forEach((function(e){e.isOpen=!1})),o[e][t]=c,a({type:"UPDATE_POSTS",payload:o});case 8:case"end":return l.stop()}}))}},I=function(e,t){return function(a,n){var r,s,c,o,l;return f.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,r=n().postsReducer.posts,s=r[e][t],a({type:"LOADING_COMMENTS"}),u.next=6,f.a.awrap(R.a.get("https://jsonplaceholder.typicode.com/comments?postId=".concat(s.id)));case 6:c=u.sent,o=Object(w.a)({},s,{comments:c.data}),(l=Object(C.a)(r))[e]=Object(C.a)(r[e]),l[e][t]=o,a({type:"UPDATE_COMMENTS",payload:l}),u.next=17;break;case 14:u.prev=14,u.t0=u.catch(0),a({type:"ERROR_COMMENTS",payload:"Comments couldn't be loaded."});case 17:case"end":return u.stop()}}),null,null,[[0,14]])}},P=(a(78),function(e){return o.a.createElement("div",{className:"Post",onClick:e.handleClick},o.a.createElement("h2",null,e.post.title),o.a.createElement("p",null,e.post.body))}),D=(a(79),Object(i.b)((function(e){return e.postsReducer}),r)((function(e){var t=e.posts[e.postsKey];return e.areCommentsLoading?o.a.createElement(S,null):e.errorComments?o.a.createElement(j,{error:e.errorComments}):o.a.createElement("div",{className:"Comments"},o.a.createElement("h1",null,"comments"),t.map((function(t,a){if(t.isOpen){if(t.comments.length)return o.a.createElement(o.a.Fragment,{key:e.postsKey},o.a.createElement("h1",null,"to ",o.a.createElement("b",null,t.title)),t.comments.map((function(e){return o.a.createElement("div",{className:"Comment",key:e.id},o.a.createElement("span",null,e.email),o.a.createElement("p",null,e.body))})));e.getComments(e.postsKey,a)}return null})))}))),G=a(44),M=a.n(G),z=(a(80),function(e){function t(){return Object(b.a)(this,t),Object(O.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props.match.params.id,this.props.usersReducer.users.length){t.next=4;break}return t.next=4,f.a.awrap(this.props.getUsers());case 4:if(!this.props.usersReducer.error){t.next=6;break}return t.abrupt("return",null);case 6:"postsKey"in this.props.usersReducer.users[e]||this.props.getUserPosts(e);case 7:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.props,a=t.usersReducer,n=t.postsReducer,r=t.match.params.id;if(a.error)return o.a.createElement(j,{error:a.error});if(!a.users.length||a.isLoading)return o.a.createElement(S,null);if(n.error)return o.a.createElement(j,{error:n.error});if(n.isLoading)return o.a.createElement(S,null);var s=a.users[r];if(!n.posts[s.postsKey])return null;var c=n.posts[s.postsKey];return o.a.createElement("div",{className:"User"},o.a.createElement("div",{className:"User__info"},o.a.createElement("img",{src:M.a,alt:"Yeah, a Rick mugshot"}),o.a.createElement("h1",null,s.name),o.a.createElement("span",null,s.email)),o.a.createElement("div",{className:"User__posts"},o.a.createElement("h1",null,"posts"),c.map((function(t,a){return o.a.createElement(P,{post:t,key:t.id,handleClick:function(){return e.props.togglePost(s.postsKey,a)}})}))),o.a.createElement(D,{postsKey:s.postsKey}))}}]),t}(c.Component)),F=Object(w.a)({},n,{},r),V=Object(i.b)((function(e){return{usersReducer:e.usersReducer,postsReducer:e.postsReducer}}),F)(z),W=(a(81),a(45)),H=a.n(W),J=function(){return o.a.createElement("nav",{className:"Navbar"},o.a.createElement("img",{src:H.a,alt:"Platzi"}),o.a.createElement(m.b,{to:"/users"},"Users"),o.a.createElement(m.b,{to:"/tasks"},"Tasks"))},Y=(a(82),a(46)),B=a.n(Y),q=function(e){return"/"===e.match.path?o.a.createElement(h.a,{to:"/users"}):o.a.createElement("div",{className:"NotFound"},o.a.createElement("h1",null,"Oops! ",e.error),o.a.createElement("p",null,"You're lost, you might use your portal gun to go back"),o.a.createElement(m.b,{to:"/"},o.a.createElement("div",{className:"NotFound__portal"},o.a.createElement("img",{src:B.a,alt:"Portal"}))))},Q=(a(83),a(26)),X=function(){return function(e){var t,a;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e({type:"LOADING_TASKS"}),n.next=4,f.a.awrap(R.a.get("https://jsonplaceholder.typicode.com/todos"));case 4:t=n.sent,a={},t.data.forEach((function(e){a[e.userId]=Object(w.a)({},a[e.userId],Object(Q.a)({},e.id,Object(w.a)({},e)))})),e({type:"UPDATE_TASKS",payload:a}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),e({type:"ERROR_TASKS",payload:n.t0.message});case 13:case"end":return n.stop()}}),null,null,[[0,10]])}},Z=function(e){return function(t){t({type:"CHANGE_NEW_TASK",payload:e})}},$=function(e){return function(t){return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"LOADING_TASKS"}),a.next=4,f.a.awrap(R.a.post("https://jsonplaceholder.typicode.com/todos",e));case 4:t({type:"SAVE_TASK"}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),t({type:"ERROR_TASKS",payload:a.t0});case 10:case"end":return a.stop()}}),null,null,[[0,7]])}},ee=function(e){return function(t){return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"LOADING_TASKS"}),a.next=4,f.a.awrap(R.a.put("https://jsonplaceholder.typicode.com/todos/".concat(e.id),e));case 4:t({type:"SAVE_TASK"}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),t({type:"ERROR_TASKS",payload:a.t0});case 10:case"end":return a.stop()}}),null,null,[[0,7]])}},te=function(e,t){return function(a,n){var r=n().tasksReducer.tasks,s=r[e][t],c=Object(w.a)({},r);c[e]=Object(w.a)({},r[e]),c[e][t]=Object(w.a)({},r[e][t],{completed:!s.completed}),a({type:"UPDATE_TASKS",payload:c})}},ae=function(e){return function(t){return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t({type:"LOADING_TASKS"}),a.next=4,f.a.awrap(R.a.delete("https://jsonplaceholder.typicode.com/todos/".concat(e)));case 4:t({type:"UPDATE_TASKS",payload:{}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),t({type:"ERROR_TASKS",payload:a.t0});case 10:case"end":return a.stop()}}),null,null,[[0,7]])}},ne=function(e){function t(){return Object(b.a)(this,t),Object(O.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(this.props.tasks).length){e.next=3;break}return e.next=3,f.a.awrap(this.props.getTasks());case 3:case"end":return e.stop()}}),null,this)}},{key:"componentDidUpdate",value:function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.keys(this.props.tasks).length||this.props.isLoading){e.next=3;break}return e.next=3,f.a.awrap(this.props.getTasks());case 3:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return this.props.isLoading?o.a.createElement(S,null):this.props.error?o.a.createElement(j,{error:this.props.error}):o.a.createElement("div",{className:"Tasks"},Object.keys(this.props.tasks).map((function(t){return o.a.createElement("div",{className:"Tasks__user",key:t},o.a.createElement("h2",{onClick:function(){e.props.toggleUsertasks(t)}},"User ",t),o.a.createElement("div",{className:"User__tasks"},Object.keys(e.props.tasks[t]).map((function(a){return o.a.createElement("div",{className:"Task",key:a},o.a.createElement("button",{className:"btn__option delete",onClick:function(){e.props.deleteTask(a)}},"\u2702"),o.a.createElement(m.b,{to:"/tasks/edit/".concat(t,"/").concat(a),className:"btn__option edit"},"\u270e"),o.a.createElement("input",{type:"checkbox",checked:e.props.tasks[t][a].completed,onChange:function(){e.props.changeCompleted(t,a)},className:"checkbox"}),e.props.tasks[t][a].title)}))),o.a.createElement(m.b,{to:"/tasks/add/".concat(t),className:"btn"},"Add task"))})))}}]),t}(c.Component),re=Object(i.b)((function(e){return e.tasksReducer}),s)(ne),se=a(23),ce=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(O.a)(this,Object(k.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(se.a)(a)),a.handleSave=a.handleSave.bind(Object(se.a)(a)),a}return Object(v.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e,t,a,n,r;return f.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:e=this.props.match.params,t=e.userId,a=e.taskId,t&&a?(n=this.props.tasks[t][a],this.props.changeNewTask(n)):(r={title:"",completed:!1},this.props.changeNewTask(r));case 2:case"end":return s.stop()}}),null,this)}},{key:"handleSave",value:function(){var e=this.props.match.params,t=e.userId,a=e.taskId,n=Object(w.a)({userId:this.props.match.params.userId},this.props.newTask);t&&a?(n=Object(w.a)({},n,{id:a}),this.props.editTask(n)):this.props.addTask(n)}},{key:"handleChange",value:function(e){var t=e.target.getAttribute("type"),a={title:this.props.newTask.title,completed:this.props.newTask.completed};"text"===t?a.title=e.target.value:"checkbox"===t&&(a.completed=e.target.checked),this.props.changeNewTask(a)}},{key:"render",value:function(){var e=this.props,t=e.match.params,a=t.userId,n=t.taskId,r=e.newTask;return this.props.isLoading?o.a.createElement(S,null):this.props.error?o.a.createElement(j,{error:this.props.error}):this.props.redirect?o.a.createElement(h.a,{to:"/tasks"}):o.a.createElement("div",{className:"AddTask"},o.a.createElement("h1",null,a&&n?"Update task":"New task to user ".concat(a)),o.a.createElement("br",null),o.a.createElement("div",{className:"form-group"},"task: ",o.a.createElement("input",{type:"text",value:r.title,onChange:this.handleChange})),o.a.createElement("div",{className:"form-group"},"completed: ",o.a.createElement("input",{type:"checkbox",checked:r.completed,className:"checkbox",onChange:this.handleChange})),o.a.createElement("br",null),a&&n?o.a.createElement("button",{disabled:r.title===this.props.tasks[a][n].title&&r.completed===this.props.tasks[a][n].completed,className:"btn big",onClick:this.handleSave},"Save"):o.a.createElement("button",{disabled:!r.title,className:"btn big",onClick:this.handleSave},"Save"))}}]),t}(c.Component),oe=Object(i.b)((function(e){return e.tasksReducer}),s)(ce),le=function(){return o.a.createElement(m.a,{basename:"/blog-platzi"},o.a.createElement(J,null),o.a.createElement("div",{className:"Layout"},o.a.createElement(h.d,null,o.a.createElement(h.b,{exact:!0,path:"/users",component:A}),o.a.createElement(h.b,{exact:!0,path:"/tasks",component:re}),o.a.createElement(h.b,{exact:!0,path:"/user/:id",component:V}),o.a.createElement(h.b,{exact:!0,path:"/tasks/add/:userId",component:oe}),o.a.createElement(h.b,{exact:!0,path:"/tasks/edit/:userId/:taskId",component:oe}),o.a.createElement(h.b,{component:q}))))},ue=(a(84),{users:[],isLoading:!1,error:null}),pe={posts:[],isLoading:!1,error:null,areCommentsLoading:!1,errorComments:null},ie={tasks:{},isLoading:!1,error:null,redirect:!1,newTask:{title:"",completed:!1}},de=Object(p.c)({usersReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS":return Object(w.a)({},e,{users:t.payload,isLoading:!1,error:null});case"LOADING_USERS":return Object(w.a)({},e,{isLoading:!0});case N:return Object(w.a)({},e,{error:t.payload,isLoading:!1});default:return e}},postsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_POSTS":case"UPDATE_POSTS":return Object(w.a)({},e,{posts:t.payload,isLoading:!1,error:null});case"LOADING_POSTS":return Object(w.a)({},e,{isLoading:!0});case"ERROR_POSTS":return Object(w.a)({},e,{error:t.payload,isLoading:!1});case"LOADING_COMMENTS":return Object(w.a)({},e,{areCommentsLoading:!0});case"ERROR_COMMENTS":return Object(w.a)({},e,{errorComments:t.payload,areCommentsLoading:!1});case"UPDATE_COMMENTS":return Object(w.a)({},e,{posts:t.payload,areCommentsLoading:!1,errorComments:null});default:return e}},tasksReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_TASKS":return Object(w.a)({},e,{tasks:t.payload,isLoading:!1,error:null,redirect:!1,newTask:{title:"",completed:!1}});case"LOADING_TASKS":return Object(w.a)({},e,{isLoading:!0});case"ERROR_TASKS":return Object(w.a)({},e,{error:t.payload,isLoading:!1});case"CHANGE_NEW_TASK":return Object(w.a)({},e,{newTask:Object(w.a)({},t.payload)});case"SAVE_TASK":return Object(w.a)({},e,{tasks:{},isLoading:!1,error:null,redirect:!0});default:return e}}}),me=Object(p.d)(de,{},Object(p.a)(d.a));u.a.render(o.a.createElement(i.a,{store:me},o.a.createElement(le,null)),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.b062066a.chunk.js.map